<style>
    /* ì •ë¶€ ê³µì‹ ìŠ¤íƒ€ì¼ - PDV ì‹œìŠ¤í…œ */
    .pdv-container {
        max-width: 1000px;
        margin: 0 auto;
        padding: 40px 20px;
    }

    .pdv-form-section {
        background: white;
        border: 1px solid #d5d5d5;
        border-radius: 4px;
        padding: 40px;
        margin-bottom: 30px;
    }

    .pdv-form-section h3 {
        font-size: 1.3em;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 30px;
        padding-bottom: 15px;
        border-bottom: 2px solid #f0f0f0;
    }

    .pdv-form-group {
        margin-bottom: 24px;
    }

    .pdv-form-label {
        display: block;
        font-size: 0.95em;
        font-weight: 600;
        color: #333;
        margin-bottom: 8px;
    }

    .pdv-form-input {
        width: 100%;
        padding: 12px 16px;
        border: 1px solid #c8c8c8;
        border-radius: 4px;
        font-size: 1em;
        color: #333;
        transition: border-color 0.2s;
    }

    .pdv-form-input:focus {
        outline: none;
        border-color: #003d82;
        box-shadow: 0 0 0 2px rgba(0, 61, 130, 0.1);
    }

    .pdv-form-help {
        font-size: 0.88em;
        color: #666;
        margin-top: 6px;
    }

    .pdv-form-divider {
        text-align: center;
        margin: 30px 0;
        position: relative;
    }

    .pdv-form-divider:before {
        content: "";
        position: absolute;
        left: 0;
        top: 50%;
        width: 100%;
        height: 1px;
        background: #e0e0e0;
    }

    .pdv-form-divider span {
        background: white;
        padding: 0 16px;
        color: #888;
        font-size: 0.9em;
        position: relative;
        z-index: 1;
    }

    .pdv-button-group {
        display: flex;
        gap: 12px;
        margin-top: 32px;
    }

    .pdv-button {
        flex: 1;
        padding: 14px 24px;
        border: none;
        border-radius: 4px;
        font-size: 1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s;
    }

    .pdv-button-primary {
        background: #003d82;
        color: white;
    }

    .pdv-button-primary:hover {
        background: #002d5f;
    }

    .pdv-button-primary:disabled {
        background: #999;
        cursor: not-allowed;
    }

    .pdv-button-secondary {
        background: white;
        color: #003d82;
        border: 1px solid #003d82;
    }

    .pdv-button-secondary:hover {
        background: #f5f8fb;
    }

    .pdv-progress-box {
        background: white;
        border: 1px solid #d5d5d5;
        border-radius: 4px;
        padding: 30px;
        margin-bottom: 30px;
        display: none;
    }

    .pdv-progress-box.show {
        display: block;
    }

    .pdv-progress-title {
        font-size: 1.1em;
        font-weight: 600;
        color: #003d82;
        margin-bottom: 20px;
        text-align: center;
    }

    .pdv-progress-message {
        text-align: center;
        color: #666;
        margin-bottom: 20px;
        min-height: 24px;
    }

    .pdv-progress-bar {
        width: 100%;
        height: 8px;
        background: #f0f0f0;
        border-radius: 4px;
        overflow: hidden;
        margin-bottom: 10px;
    }

    .pdv-progress-bar-fill {
        height: 100%;
        background: linear-gradient(90deg, #003d82, #0056b3);
        border-radius: 4px;
        transition: width 0.3s ease;
        animation: progress-animation 1.5s ease-in-out infinite;
    }

    @keyframes progress-animation {
        0% { opacity: 0.6; }
        50% { opacity: 1; }
        100% { opacity: 0.6; }
    }

    .pdv-success-box {
        background: #e8f5e9;
        border: 1px solid #4caf50;
        border-radius: 4px;
        padding: 20px 24px;
        margin-bottom: 30px;
        display: none;
    }

    .pdv-success-box.show {
        display: block;
    }

    .pdv-success-box h4 {
        color: #2e7d32;
        font-size: 1.1em;
        font-weight: 600;
        margin-bottom: 8px;
    }

    .pdv-success-box p {
        color: #1b5e20;
        margin: 0;
    }

    .pdv-dashboard {
        display: none;
    }

    .pdv-dashboard.show {
        display: block;
    }

    .pdv-dashboard-section {
        background: white;
        border: 1px solid #d5d5d5;
        border-radius: 4px;
        padding: 32px;
        margin-bottom: 24px;
    }

    .pdv-dashboard-title {
        font-size: 1.2em;
        font-weight: 600;
        color: #1a1a1a;
        margin-bottom: 24px;
        padding-bottom: 12px;
        border-bottom: 2px solid #f0f0f0;
    }

    .pdv-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 20px;
        margin-bottom: 32px;
    }

    .pdv-info-card {
        background: #f5f8fb;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        padding: 20px;
    }

    .pdv-info-card-label {
        font-size: 0.88em;
        color: #666;
        margin-bottom: 8px;
        font-weight: 500;
    }

    .pdv-info-card-value {
        font-size: 1.15em;
        color: #1a1a1a;
        font-weight: 600;
        word-break: break-all;
    }

    .pdv-documents-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 16px;
        margin-top: 20px;
    }

    .pdv-document-card {
        background: #fafafa;
        border: 1px solid #e0e0e0;
        border-radius: 4px;
        padding: 16px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .pdv-document-card:hover {
        border-color: #003d82;
        box-shadow: 0 2px 8px rgba(0,61,130,0.1);
    }

    .pdv-document-icon {
        font-size: 1.5em;
        margin-bottom: 8px;
    }

    .pdv-document-title {
        font-weight: 600;
        color: #003d82;
        margin-bottom: 4px;
    }

    .pdv-document-date {
        font-size: 0.85em;
        color: #888;
    }

    .pdv-info-box {
        background: #f5f8fb;
        border: 1px solid #d5d5d5;
        border-radius: 4px;
        padding: 24px;
        margin-bottom: 24px;
    }

    .pdv-info-box h3 {
        font-size: 1.1em;
        font-weight: 600;
        color: #003d82;
        margin-bottom: 16px;
    }

    .pdv-info-list {
        list-style: none;
        padding: 0;
        margin: 0;
    }

    .pdv-info-list li {
        padding: 8px 0 8px 24px;
        position: relative;
        color: #333;
        line-height: 1.6;
    }

    .pdv-info-list li:before {
        content: "âœ“";
        position: absolute;
        left: 0;
        color: #003d82;
        font-weight: bold;
    }

    .pdv-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        z-index: 10000;
        display: none;
        align-items: center;
        justify-content: center;
    }

    .pdv-modal-overlay.show {
        display: flex;
    }

    .pdv-modal {
        background: white;
        border-radius: 8px;
        max-width: 700px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .pdv-modal-header {
        padding: 24px;
        border-bottom: 1px solid #e0e0e0;
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .pdv-modal-title {
        font-size: 1.3em;
        font-weight: 600;
        color: #1a1a1a;
    }

    .pdv-modal-close {
        width: 32px;
        height: 32px;
        border: none;
        background: #f0f0f0;
        border-radius: 50%;
        font-size: 1.5em;
        color: #666;
        cursor: pointer;
        transition: all 0.2s;
        display: flex;
        align-items: center;
        justify-content: center;
        line-height: 1;
    }

    .pdv-modal-close:hover {
        background: #e0e0e0;
        color: #333;
    }

    .pdv-modal-body {
        padding: 24px;
    }

    .pdv-modal-body table {
        width: 100%;
        border-collapse: collapse;
    }

    .pdv-modal-body th,
    .pdv-modal-body td {
        padding: 12px;
        border-bottom: 1px solid #f0f0f0;
        text-align: left;
    }

    .pdv-modal-body th {
        background: #f5f8fb;
        font-weight: 600;
        color: #333;
        width: 35%;
    }

    .pdv-modal-body td {
        color: #666;
    }
</style>

<div class="pdv-container">
    <!-- PDV ë“±ë¡ í¼ -->
    <div id="pdv-form" class="pdv-form-section">
        <h3>ë„ë¯¼ PDV (Personal Data Vault) ìƒì„± / ì ‘ì†</h3>
        
        <form id="pdv-registration-form">
            <div class="pdv-form-group">
                <label class="pdv-form-label" for="phone-number">íœ´ëŒ€í° ë²ˆí˜¸</label>
                <input 
                    type="tel" 
                    id="phone-number" 
                    class="pdv-form-input"
                    placeholder="010-1234-5678"
                    pattern="[0-9]{3}-[0-9]{4}-[0-9]{4}"
                >
                <div class="pdv-form-help">í•˜ì´í”ˆ(-)ì„ í¬í•¨í•˜ì—¬ ì…ë ¥í•´ì£¼ì„¸ìš”</div>
            </div>

            <div class="pdv-form-divider">
                <span>ë˜ëŠ”</span>
            </div>

            <div class="pdv-form-group">
                <label class="pdv-form-label" for="unique-id">ê³ ìœ  ì•„ì´ë””</label>
                <input 
                    type="text" 
                    id="unique-id" 
                    class="pdv-form-input"
                    placeholder="ì˜ë¬¸ + ìˆ«ì ì¡°í•©"
                >
                <div class="pdv-form-help">íœ´ëŒ€í° ë²ˆí˜¸ ëŒ€ì‹  ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê³ ìœ  ì‹ë³„ì</div>
            </div>

            <div class="pdv-button-group">
                <button type="reset" class="pdv-button pdv-button-secondary">ì´ˆê¸°í™”</button>
                <button type="submit" id="pdv-submit-btn" class="pdv-button pdv-button-primary">ìƒì„± / ì ‘ì†</button>
            </div>
        </form>
    </div>

    <!-- ì§„í–‰ ìƒíƒœ -->
    <div id="pdv-progress" class="pdv-progress-box">
        <div class="pdv-progress-title">PDVë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤</div>
        <div id="progress-message" class="pdv-progress-message">ì¤€ë¹„ ì¤‘...</div>
        <div class="pdv-progress-bar">
            <div id="progress-bar-fill" class="pdv-progress-bar-fill" style="width: 0%"></div>
        </div>
    </div>

    <!-- ì„±ê³µ ë©”ì‹œì§€ -->
    <div id="success-message" class="pdv-success-box">
        <h4>PDVê°€ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤</h4>
        <p>ê°œì¸ì •ë³´ ê¸ˆê³ ê°€ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
    </div>

    <!-- PDV ëŒ€ì‹œë³´ë“œ -->
    <div id="pdv-dashboard" class="pdv-dashboard">
        <!-- ê¸°ë³¸ ì •ë³´ -->
        <div class="pdv-dashboard-section">
            <h3 class="pdv-dashboard-title">PDV ê¸°ë³¸ ì •ë³´</h3>
            
            <div class="pdv-info-grid">
                <div class="pdv-info-card">
                    <div class="pdv-info-card-label">ì„±ëª…</div>
                    <div class="pdv-info-card-value" id="display-name">-</div>
                </div>
                <div class="pdv-info-card">
                    <div class="pdv-info-card-label">ìƒë…„ì›”ì¼</div>
                    <div class="pdv-info-card-value" id="display-birth">-</div>
                </div>
                <div class="pdv-info-card">
                    <div class="pdv-info-card-label">ì£¼ì†Œ</div>
                    <div class="pdv-info-card-value" id="display-address">-</div>
                </div>
                <div class="pdv-info-card">
                    <div class="pdv-info-card-label">PDV ID</div>
                    <div class="pdv-info-card-value" id="display-pdv-id">-</div>
                </div>
            </div>
        </div>

        <!-- ë³´ê´€ ë¬¸ì„œ -->
        <div class="pdv-dashboard-section">
            <h3 class="pdv-dashboard-title">ë³´ê´€ ë¬¸ì„œ</h3>
            <div class="pdv-documents-list" id="documents-list"></div>
        </div>

        <!-- ì „ì†¡ ë‚´ì—­ -->
        <div id="transfer-logs-section" class="pdv-dashboard-section" style="display: none;">
            <h3 class="pdv-dashboard-title">ë¬¸ì„œ ì „ì†¡ ë‚´ì—­</h3>
            
            <div class="transfer-tabs">
                <button class="transfer-tab active" data-tab="sent" onclick="switchTransferTab('sent')">
                    ğŸ“¤ ì†¡ì‹  (0)
                </button>
                <button class="transfer-tab" data-tab="received" onclick="switchTransferTab('received')">
                    ğŸ“¥ ìˆ˜ì‹  (0)
                </button>
            </div>
            
            <div id="sent-transfers" class="transfer-list" style="display: block;">
                <div id="sent-transfer-list"></div>
            </div>
            
            <div id="received-transfers" class="transfer-list" style="display: none;">
                <div id="received-transfer-list"></div>
            </div>
        </div>

        <!-- í–‰ì •ê¸°ê´€ ì—°ë™ ì•ˆë‚´ -->
        <div class="pdv-info-box">
            <h3>ì œì£¼íŠ¹ë³„ìì¹˜ë„ í–‰ì •ê¸°ê´€ ì—°ë™</h3>
            <ul class="pdv-info-list">
                <li>ì´ PDVëŠ” ì œì£¼íŠ¹ë³„ìì¹˜ë„ í–‰ì •ê¸°ê´€ê³¼ ê·€í•˜ ê°„ì˜ ëª¨ë“  ì†Œí†µì„ ì•ˆì „í•˜ê²Œ ê¸°ë¡í•©ë‹ˆë‹¤</li>
                <li>í–‰ì • ì²˜ë¦¬ ê³¼ì •ì´ íˆ¬ëª…í•˜ê²Œ ê´€ë¦¬ë©ë‹ˆë‹¤</li>
                <li>AI ìƒë‹´ ë‚´ì—­ë„ í•¨ê»˜ ì €ì¥ë˜ì–´ ì–¸ì œë“ ì§€ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</li>
            </ul>
        </div>
    </div>
</div>

<!-- ë¬¸ì„œ ìƒì„¸ ëª¨ë‹¬ -->
<div id="document-modal" class="pdv-modal-overlay">
    <div class="pdv-modal">
        <div class="pdv-modal-header">
            <h3 class="pdv-modal-title" id="modal-doc-title">ë¬¸ì„œ ìƒì„¸</h3>
            <button class="pdv-modal-close" onclick="closeDocumentModal()">Ã—</button>
        </div>
        <div class="pdv-modal-body" id="modal-doc-body"></div>
    </div>
</div>

<!-- ì „ì†¡ ëª¨ë‹¬ -->
<div id="transfer-modal" class="transfer-modal-overlay">
    <div class="transfer-modal">
        <div class="transfer-modal-header">
            <h3 class="transfer-modal-title">ğŸ“¤ ë¬¸ì„œ ì „ì†¡</h3>
        </div>
        <div class="transfer-modal-body">
            <div class="transfer-form-group">
                <label class="transfer-form-label">ì „ì†¡í•  ë¬¸ì„œ</label>
                <div style="padding: 12px; background: #f5f8fb; border-radius: 4px; font-weight: 600;">
                    <span id="transfer-doc-name"></span>
                </div>
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ìˆ˜ì‹ ì ê²€ìƒ‰</label>
                <input type="text" class="transfer-form-input" id="transfer-receiver-search" placeholder="ì´ë¦„, ì „í™”ë²ˆí˜¸ë¡œ ê²€ìƒ‰...">
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ìˆ˜ì‹ ì ì„ íƒ</label>
                <div class="transfer-receiver-list" id="transfer-receiver-list">
                    <div style="padding: 20px; text-align: center; color: #999;">ìˆ˜ì‹ ìë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</div>
                </div>
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ì „ì†¡ ëª©ì  ì¹´í…Œê³ ë¦¬</label>
                <select class="transfer-form-select" id="transfer-purpose-category">
                    <option value="EMPLOYMENT">ì±„ìš©/ì¸ì‚¬</option>
                    <option value="CONTRACT">ê³„ì•½</option>
                    <option value="APPLICATION">ì‹ ì²­/ì§€ì›</option>
                    <option value="VERIFICATION">ë³¸ì¸ í™•ì¸</option>
                    <option value="FINANCIAL">ê¸ˆìœµ ê±°ë˜</option>
                    <option value="MEDICAL">ì˜ë£Œ</option>
                    <option value="LEGAL">ë²•ì  ì ˆì°¨</option>
                    <option value="OTHER">ê¸°íƒ€</option>
                </select>
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ìƒì„¸ ì„¤ëª…</label>
                <textarea class="transfer-form-textarea" id="transfer-purpose-desc" placeholder="ì˜ˆ: ì…ì‚¬ ì§€ì›ì„ ìœ„í•œ ì„œë¥˜ ì œì¶œ"></textarea>
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ì°¸ì¡°ë²ˆí˜¸ (ì„ íƒ)</label>
                <input type="text" class="transfer-form-input" id="transfer-reference" placeholder="ì˜ˆ: REQ-2025-HR-001">
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ë§Œë£Œì¼</label>
                <select class="transfer-form-select" id="transfer-expires">
                    <option value="1">1ì¼ í›„</option>
                    <option value="3">3ì¼ í›„</option>
                    <option value="7" selected>7ì¼ í›„</option>
                    <option value="14">14ì¼ í›„</option>
                    <option value="30">30ì¼ í›„</option>
                </select>
            </div>
            
            <div class="transfer-form-group">
                <label class="transfer-form-label">ìµœëŒ€ ì¡°íšŒ íšŸìˆ˜</label>
                <select class="transfer-form-select" id="transfer-max-views">
                    <option value="3">3íšŒ</option>
                    <option value="5">5íšŒ</option>
                    <option value="10" selected>10íšŒ</option>
                    <option value="20">20íšŒ</option>
                    <option value="999">ë¬´ì œí•œ</option>
                </select>
            </div>
            
            <div class="transfer-form-group">
                <label style="display: flex; align-items: center; cursor: pointer;">
                    <input type="checkbox" id="transfer-downloadable" checked style="margin-right: 8px;">
                    <span>ë‹¤ìš´ë¡œë“œ í—ˆìš©</span>
                </label>
            </div>
            
            <div class="transfer-modal-actions">
                <button class="transfer-btn transfer-btn-secondary" onclick="closeTransferModal()">ì·¨ì†Œ</button>
                <button class="transfer-btn transfer-btn-primary" onclick="executeTransfer()">ì „ì†¡í•˜ê¸°</button>
            </div>
        </div>
    </div>
</div>
